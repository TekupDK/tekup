f082cc2317cb12683fb23b80d9cb2553
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _testing = require("@nestjs/testing");
const _leadservice = require("./lead.service");
const _prismaservice = require("../prisma/prisma.service.js");
const _metricsservice = require("../metrics/metrics.service.js");
const _settingsservice = require("../settings/settings.service.js");
const _cacheservice = require("../cache/cache.service.js");
const _performanceservice = require("../performance/performance.service.js");
const _structuredloggerservice = require("../common/logging/structured-logger.service.js");
const _asynccontextservice = require("../common/logging/async-context.service.js");
const _retryservice = require("../common/exceptions/retry.service.js");
const _circuitbreakerservice = require("../common/circuit-breaker/circuit-breaker.service.js");
const _duplicatedetectionservice = require("./services/duplicate-detection.service.js");
const _performanceoptimizationservice = require("../performance/performance-optimization.service.js");
const _websocketservice = require("../websocket/websocket.service.js");
const _paginationservice = require("../common/pagination/pagination.service.js");
const _common = require("@nestjs/common");
const _customexceptions = require("../common/exceptions/custom-exceptions.js");
// Mock all services
const mockPrismaService = {
    lead: {
        findFirst: jest.fn(),
        update: jest.fn()
    },
    $transaction: jest.fn(),
    leadEvent: {
        create: jest.fn()
    }
};
const mockMetricsService = {
    increment: jest.fn()
};
const mockSettingsService = {};
const mockCacheService = {};
const mockPerformanceService = {
    measureQuery: jest.fn()
};
const mockLogger = {
    logBusinessEvent: jest.fn(),
    debug: jest.fn(),
    error: jest.fn(),
    warn: jest.fn()
};
const mockContextService = {
    toLogContext: jest.fn().mockReturnValue({}),
    getUserId: jest.fn()
};
const mockRetryService = {
    executeWithDatabaseRetry: jest.fn()
};
const mockCircuitBreakerService = {};
const mockDuplicateDetectionService = {};
const mockPerformanceOptimizationService = {
    invalidateLeadStats: jest.fn(),
    invalidateLeadCounts: jest.fn()
};
const mockWebSocketService = {
    sendStatusChange: jest.fn()
};
const mockPaginationService = {
    paginateLeads: jest.fn()
};
describe('LeadService - Cross-Tenant Access', ()=>{
    let service;
    beforeEach(async ()=>{
        const module = await _testing.Test.createTestingModule({
            providers: [
                _leadservice.LeadService,
                {
                    provide: _prismaservice.PrismaService,
                    useValue: mockPrismaService
                },
                {
                    provide: _metricsservice.MetricsService,
                    useValue: mockMetricsService
                },
                {
                    provide: _settingsservice.SettingsService,
                    useValue: mockSettingsService
                },
                {
                    provide: _cacheservice.CacheService,
                    useValue: mockCacheService
                },
                {
                    provide: _performanceservice.PerformanceService,
                    useValue: mockPerformanceService
                },
                {
                    provide: _structuredloggerservice.StructuredLoggerService,
                    useValue: mockLogger
                },
                {
                    provide: _asynccontextservice.AsyncContextService,
                    useValue: mockContextService
                },
                {
                    provide: _retryservice.RetryService,
                    useValue: mockRetryService
                },
                {
                    provide: _circuitbreakerservice.CircuitBreakerService,
                    useValue: mockCircuitBreakerService
                },
                {
                    provide: _duplicatedetectionservice.DuplicateDetectionService,
                    useValue: mockDuplicateDetectionService
                },
                {
                    provide: _performanceoptimizationservice.PerformanceOptimizationService,
                    useValue: mockPerformanceOptimizationService
                },
                {
                    provide: _websocketservice.WebSocketService,
                    useValue: mockWebSocketService
                },
                {
                    provide: _paginationservice.PaginationService,
                    useValue: mockPaginationService
                }
            ]
        }).compile();
        service = module.get(_leadservice.LeadService);
    });
    afterEach(()=>{
        jest.clearAllMocks();
    });
    it('should be defined', ()=>{
        expect(service).toBeDefined();
    });
    describe('changeStatus', ()=>{
        const leadId = 'test-lead-id';
        const tenantId = 'test-tenant-id';
        const toStatus = 'CONTACTED';
        it('should throw NotFoundException for cross-tenant access attempts (P2004 error)', async ()=>{
            // Create a proper Prisma error with code property
            const prismaError = new Error('Insufficient permissions');
            prismaError.code = 'P2004';
            mockRetryService.executeWithDatabaseRetry.mockRejectedValue(prismaError);
            await expect(service.changeStatus(leadId, tenantId, toStatus)).rejects.toThrow(_common.NotFoundException);
            await expect(service.changeStatus(leadId, tenantId, toStatus)).rejects.toThrow('Lead not found');
        });
        it('should re-throw LeadNotFoundException as-is', async ()=>{
            const leadNotFoundError = new _customexceptions.LeadNotFoundException(leadId, tenantId);
            mockRetryService.executeWithDatabaseRetry.mockRejectedValue(leadNotFoundError);
            await expect(service.changeStatus(leadId, tenantId, toStatus)).rejects.toThrow(_customexceptions.LeadNotFoundException);
        });
        it('should throw DatabaseException for other errors', async ()=>{
            const otherError = new Error('Some other database error');
            mockRetryService.executeWithDatabaseRetry.mockRejectedValue(otherError);
            // We expect it to throw a DatabaseException, but we can't easily check the exact type
            // in this test setup. The important thing is that it doesn't throw the original error.
            await expect(service.changeStatus(leadId, tenantId, toStatus)).rejects.toThrow();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZW1waXJcXFRla3VwLW9yZ1xcYXBwc1xcZmxvdy1hcGlcXHNyY1xcbGVhZFxcbGVhZC5zZXJ2aWNlLmNyb3NzLXRlbmFudC5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xyXG5pbXBvcnQgeyBMZWFkU2VydmljZSB9IGZyb20gJy4vbGVhZC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUHJpc21hU2VydmljZSB9IGZyb20gJy4uL3ByaXNtYS9wcmlzbWEuc2VydmljZS5qcyc7XHJcbmltcG9ydCB7IE1ldHJpY3NTZXJ2aWNlIH0gZnJvbSAnLi4vbWV0cmljcy9tZXRyaWNzLnNlcnZpY2UuanMnO1xyXG5pbXBvcnQgeyBTZXR0aW5nc1NlcnZpY2UgfSBmcm9tICcuLi9zZXR0aW5ncy9zZXR0aW5ncy5zZXJ2aWNlLmpzJztcclxuaW1wb3J0IHsgQ2FjaGVTZXJ2aWNlIH0gZnJvbSAnLi4vY2FjaGUvY2FjaGUuc2VydmljZS5qcyc7XHJcbmltcG9ydCB7IFBlcmZvcm1hbmNlU2VydmljZSB9IGZyb20gJy4uL3BlcmZvcm1hbmNlL3BlcmZvcm1hbmNlLnNlcnZpY2UuanMnO1xyXG5pbXBvcnQgeyBTdHJ1Y3R1cmVkTG9nZ2VyU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9sb2dnaW5nL3N0cnVjdHVyZWQtbG9nZ2VyLnNlcnZpY2UuanMnO1xyXG5pbXBvcnQgeyBBc3luY0NvbnRleHRTZXJ2aWNlIH0gZnJvbSAnLi4vY29tbW9uL2xvZ2dpbmcvYXN5bmMtY29udGV4dC5zZXJ2aWNlLmpzJztcclxuaW1wb3J0IHsgUmV0cnlTZXJ2aWNlIH0gZnJvbSAnLi4vY29tbW9uL2V4Y2VwdGlvbnMvcmV0cnkuc2VydmljZS5qcyc7XHJcbmltcG9ydCB7IENpcmN1aXRCcmVha2VyU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9jaXJjdWl0LWJyZWFrZXIvY2lyY3VpdC1icmVha2VyLnNlcnZpY2UuanMnO1xyXG5pbXBvcnQgeyBEdXBsaWNhdGVEZXRlY3Rpb25TZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9kdXBsaWNhdGUtZGV0ZWN0aW9uLnNlcnZpY2UuanMnO1xyXG5pbXBvcnQgeyBQZXJmb3JtYW5jZU9wdGltaXphdGlvblNlcnZpY2UgfSBmcm9tICcuLi9wZXJmb3JtYW5jZS9wZXJmb3JtYW5jZS1vcHRpbWl6YXRpb24uc2VydmljZS5qcyc7XHJcbmltcG9ydCB7IFdlYlNvY2tldFNlcnZpY2UgfSBmcm9tICcuLi93ZWJzb2NrZXQvd2Vic29ja2V0LnNlcnZpY2UuanMnO1xyXG5pbXBvcnQgeyBQYWdpbmF0aW9uU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9wYWdpbmF0aW9uL3BhZ2luYXRpb24uc2VydmljZS5qcyc7XHJcbmltcG9ydCB7IE5vdEZvdW5kRXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xyXG5pbXBvcnQgeyBMZWFkTm90Rm91bmRFeGNlcHRpb24gfSBmcm9tICcuLi9jb21tb24vZXhjZXB0aW9ucy9jdXN0b20tZXhjZXB0aW9ucy5qcyc7XHJcblxyXG4vLyBNb2NrIGFsbCBzZXJ2aWNlc1xyXG5jb25zdCBtb2NrUHJpc21hU2VydmljZSA9IHtcclxuICBsZWFkOiB7XHJcbiAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcclxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gIH0sXHJcbiAgJHRyYW5zYWN0aW9uOiBqZXN0LmZuKCksXHJcbiAgbGVhZEV2ZW50OiB7XHJcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcclxuICB9LFxyXG59O1xyXG5cclxuY29uc3QgbW9ja01ldHJpY3NTZXJ2aWNlID0ge1xyXG4gIGluY3JlbWVudDogamVzdC5mbigpLFxyXG59O1xyXG5cclxuY29uc3QgbW9ja1NldHRpbmdzU2VydmljZSA9IHt9O1xyXG5jb25zdCBtb2NrQ2FjaGVTZXJ2aWNlID0ge307XHJcbmNvbnN0IG1vY2tQZXJmb3JtYW5jZVNlcnZpY2UgPSB7XHJcbiAgbWVhc3VyZVF1ZXJ5OiBqZXN0LmZuKCksXHJcbn07XHJcbmNvbnN0IG1vY2tMb2dnZXIgPSB7XHJcbiAgbG9nQnVzaW5lc3NFdmVudDogamVzdC5mbigpLFxyXG4gIGRlYnVnOiBqZXN0LmZuKCksXHJcbiAgZXJyb3I6IGplc3QuZm4oKSxcclxuICB3YXJuOiBqZXN0LmZuKCksXHJcbn07XHJcbmNvbnN0IG1vY2tDb250ZXh0U2VydmljZSA9IHtcclxuICB0b0xvZ0NvbnRleHQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe30pLFxyXG4gIGdldFVzZXJJZDogamVzdC5mbigpLFxyXG59O1xyXG5jb25zdCBtb2NrUmV0cnlTZXJ2aWNlID0ge1xyXG4gIGV4ZWN1dGVXaXRoRGF0YWJhc2VSZXRyeTogamVzdC5mbigpLFxyXG59O1xyXG5jb25zdCBtb2NrQ2lyY3VpdEJyZWFrZXJTZXJ2aWNlID0ge307XHJcbmNvbnN0IG1vY2tEdXBsaWNhdGVEZXRlY3Rpb25TZXJ2aWNlID0ge307XHJcbmNvbnN0IG1vY2tQZXJmb3JtYW5jZU9wdGltaXphdGlvblNlcnZpY2UgPSB7XHJcbiAgaW52YWxpZGF0ZUxlYWRTdGF0czogamVzdC5mbigpLFxyXG4gIGludmFsaWRhdGVMZWFkQ291bnRzOiBqZXN0LmZuKCksXHJcbn07XHJcbmNvbnN0IG1vY2tXZWJTb2NrZXRTZXJ2aWNlID0ge1xyXG4gIHNlbmRTdGF0dXNDaGFuZ2U6IGplc3QuZm4oKSxcclxufTtcclxuY29uc3QgbW9ja1BhZ2luYXRpb25TZXJ2aWNlID0ge1xyXG4gIHBhZ2luYXRlTGVhZHM6IGplc3QuZm4oKSxcclxufTtcclxuXHJcbmRlc2NyaWJlKCdMZWFkU2VydmljZSAtIENyb3NzLVRlbmFudCBBY2Nlc3MnLCAoKSA9PiB7XHJcbiAgbGV0IHNlcnZpY2U6IExlYWRTZXJ2aWNlO1xyXG5cclxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vZHVsZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XHJcbiAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIExlYWRTZXJ2aWNlLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGU6IFByaXNtYVNlcnZpY2UsXHJcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1ByaXNtYVNlcnZpY2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBNZXRyaWNzU2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrTWV0cmljc1NlcnZpY2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBTZXR0aW5nc1NlcnZpY2UsXHJcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1NldHRpbmdzU2VydmljZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGU6IENhY2hlU2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ2FjaGVTZXJ2aWNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogUGVyZm9ybWFuY2VTZXJ2aWNlLFxyXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tQZXJmb3JtYW5jZVNlcnZpY2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBTdHJ1Y3R1cmVkTG9nZ2VyU2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrTG9nZ2VyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogQXN5bmNDb250ZXh0U2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ29udGV4dFNlcnZpY2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBSZXRyeVNlcnZpY2UsXHJcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1JldHJ5U2VydmljZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGU6IENpcmN1aXRCcmVha2VyU2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ2lyY3VpdEJyZWFrZXJTZXJ2aWNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogRHVwbGljYXRlRGV0ZWN0aW9uU2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrRHVwbGljYXRlRGV0ZWN0aW9uU2VydmljZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGU6IFBlcmZvcm1hbmNlT3B0aW1pemF0aW9uU2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrUGVyZm9ybWFuY2VPcHRpbWl6YXRpb25TZXJ2aWNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogV2ViU29ja2V0U2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrV2ViU29ja2V0U2VydmljZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGU6IFBhZ2luYXRpb25TZXJ2aWNlLFxyXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tQYWdpbmF0aW9uU2VydmljZSxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgfSkuY29tcGlsZSgpO1xyXG5cclxuICAgIHNlcnZpY2UgPSBtb2R1bGUuZ2V0PExlYWRTZXJ2aWNlPihMZWFkU2VydmljZSk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBiZSBkZWZpbmVkJywgKCkgPT4ge1xyXG4gICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVEZWZpbmVkKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdjaGFuZ2VTdGF0dXMnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBsZWFkSWQgPSAndGVzdC1sZWFkLWlkJztcclxuICAgIGNvbnN0IHRlbmFudElkID0gJ3Rlc3QtdGVuYW50LWlkJztcclxuICAgIGNvbnN0IHRvU3RhdHVzID0gJ0NPTlRBQ1RFRCcgYXMgY29uc3Q7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBOb3RGb3VuZEV4Y2VwdGlvbiBmb3IgY3Jvc3MtdGVuYW50IGFjY2VzcyBhdHRlbXB0cyAoUDIwMDQgZXJyb3IpJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBDcmVhdGUgYSBwcm9wZXIgUHJpc21hIGVycm9yIHdpdGggY29kZSBwcm9wZXJ0eVxyXG4gICAgICBjb25zdCBwcmlzbWFFcnJvcjogYW55ID0gbmV3IEVycm9yKCdJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMnKTtcclxuICAgICAgcHJpc21hRXJyb3IuY29kZSA9ICdQMjAwNCc7XHJcbiAgICAgIFxyXG4gICAgICBtb2NrUmV0cnlTZXJ2aWNlLmV4ZWN1dGVXaXRoRGF0YWJhc2VSZXRyeS5tb2NrUmVqZWN0ZWRWYWx1ZShwcmlzbWFFcnJvcik7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jaGFuZ2VTdGF0dXMobGVhZElkLCB0ZW5hbnRJZCwgdG9TdGF0dXMpKS5yZWplY3RzLnRvVGhyb3coTm90Rm91bmRFeGNlcHRpb24pO1xyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jaGFuZ2VTdGF0dXMobGVhZElkLCB0ZW5hbnRJZCwgdG9TdGF0dXMpKS5yZWplY3RzLnRvVGhyb3coJ0xlYWQgbm90IGZvdW5kJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlLXRocm93IExlYWROb3RGb3VuZEV4Y2VwdGlvbiBhcy1pcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbGVhZE5vdEZvdW5kRXJyb3IgPSBuZXcgTGVhZE5vdEZvdW5kRXhjZXB0aW9uKGxlYWRJZCwgdGVuYW50SWQpO1xyXG4gICAgICBtb2NrUmV0cnlTZXJ2aWNlLmV4ZWN1dGVXaXRoRGF0YWJhc2VSZXRyeS5tb2NrUmVqZWN0ZWRWYWx1ZShsZWFkTm90Rm91bmRFcnJvcik7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jaGFuZ2VTdGF0dXMobGVhZElkLCB0ZW5hbnRJZCwgdG9TdGF0dXMpKS5yZWplY3RzLnRvVGhyb3coTGVhZE5vdEZvdW5kRXhjZXB0aW9uKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgRGF0YWJhc2VFeGNlcHRpb24gZm9yIG90aGVyIGVycm9ycycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgb3RoZXJFcnJvciA9IG5ldyBFcnJvcignU29tZSBvdGhlciBkYXRhYmFzZSBlcnJvcicpO1xyXG4gICAgICBtb2NrUmV0cnlTZXJ2aWNlLmV4ZWN1dGVXaXRoRGF0YWJhc2VSZXRyeS5tb2NrUmVqZWN0ZWRWYWx1ZShvdGhlckVycm9yKTtcclxuXHJcbiAgICAgIC8vIFdlIGV4cGVjdCBpdCB0byB0aHJvdyBhIERhdGFiYXNlRXhjZXB0aW9uLCBidXQgd2UgY2FuJ3QgZWFzaWx5IGNoZWNrIHRoZSBleGFjdCB0eXBlXHJcbiAgICAgIC8vIGluIHRoaXMgdGVzdCBzZXR1cC4gVGhlIGltcG9ydGFudCB0aGluZyBpcyB0aGF0IGl0IGRvZXNuJ3QgdGhyb3cgdGhlIG9yaWdpbmFsIGVycm9yLlxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jaGFuZ2VTdGF0dXMobGVhZElkLCB0ZW5hbnRJZCwgdG9TdGF0dXMpKS5yZWplY3RzLnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTsiXSwibmFtZXMiOlsibW9ja1ByaXNtYVNlcnZpY2UiLCJsZWFkIiwiZmluZEZpcnN0IiwiamVzdCIsImZuIiwidXBkYXRlIiwiJHRyYW5zYWN0aW9uIiwibGVhZEV2ZW50IiwiY3JlYXRlIiwibW9ja01ldHJpY3NTZXJ2aWNlIiwiaW5jcmVtZW50IiwibW9ja1NldHRpbmdzU2VydmljZSIsIm1vY2tDYWNoZVNlcnZpY2UiLCJtb2NrUGVyZm9ybWFuY2VTZXJ2aWNlIiwibWVhc3VyZVF1ZXJ5IiwibW9ja0xvZ2dlciIsImxvZ0J1c2luZXNzRXZlbnQiLCJkZWJ1ZyIsImVycm9yIiwid2FybiIsIm1vY2tDb250ZXh0U2VydmljZSIsInRvTG9nQ29udGV4dCIsIm1vY2tSZXR1cm5WYWx1ZSIsImdldFVzZXJJZCIsIm1vY2tSZXRyeVNlcnZpY2UiLCJleGVjdXRlV2l0aERhdGFiYXNlUmV0cnkiLCJtb2NrQ2lyY3VpdEJyZWFrZXJTZXJ2aWNlIiwibW9ja0R1cGxpY2F0ZURldGVjdGlvblNlcnZpY2UiLCJtb2NrUGVyZm9ybWFuY2VPcHRpbWl6YXRpb25TZXJ2aWNlIiwiaW52YWxpZGF0ZUxlYWRTdGF0cyIsImludmFsaWRhdGVMZWFkQ291bnRzIiwibW9ja1dlYlNvY2tldFNlcnZpY2UiLCJzZW5kU3RhdHVzQ2hhbmdlIiwibW9ja1BhZ2luYXRpb25TZXJ2aWNlIiwicGFnaW5hdGVMZWFkcyIsImRlc2NyaWJlIiwic2VydmljZSIsImJlZm9yZUVhY2giLCJtb2R1bGUiLCJUZXN0IiwiY3JlYXRlVGVzdGluZ01vZHVsZSIsInByb3ZpZGVycyIsIkxlYWRTZXJ2aWNlIiwicHJvdmlkZSIsIlByaXNtYVNlcnZpY2UiLCJ1c2VWYWx1ZSIsIk1ldHJpY3NTZXJ2aWNlIiwiU2V0dGluZ3NTZXJ2aWNlIiwiQ2FjaGVTZXJ2aWNlIiwiUGVyZm9ybWFuY2VTZXJ2aWNlIiwiU3RydWN0dXJlZExvZ2dlclNlcnZpY2UiLCJBc3luY0NvbnRleHRTZXJ2aWNlIiwiUmV0cnlTZXJ2aWNlIiwiQ2lyY3VpdEJyZWFrZXJTZXJ2aWNlIiwiRHVwbGljYXRlRGV0ZWN0aW9uU2VydmljZSIsIlBlcmZvcm1hbmNlT3B0aW1pemF0aW9uU2VydmljZSIsIldlYlNvY2tldFNlcnZpY2UiLCJQYWdpbmF0aW9uU2VydmljZSIsImNvbXBpbGUiLCJnZXQiLCJhZnRlckVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsImxlYWRJZCIsInRlbmFudElkIiwidG9TdGF0dXMiLCJwcmlzbWFFcnJvciIsIkVycm9yIiwiY29kZSIsIm1vY2tSZWplY3RlZFZhbHVlIiwiY2hhbmdlU3RhdHVzIiwicmVqZWN0cyIsInRvVGhyb3ciLCJOb3RGb3VuZEV4Y2VwdGlvbiIsImxlYWROb3RGb3VuZEVycm9yIiwiTGVhZE5vdEZvdW5kRXhjZXB0aW9uIiwib3RoZXJFcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozt5QkFBb0M7NkJBQ1I7K0JBQ0U7Z0NBQ0M7aUNBQ0M7OEJBQ0g7b0NBQ007eUNBQ0s7cUNBQ0o7OEJBQ1A7dUNBQ1M7MkNBQ0k7Z0RBQ0s7a0NBQ2Q7bUNBQ0M7d0JBQ0E7a0NBQ0k7QUFFdEMsb0JBQW9CO0FBQ3BCLE1BQU1BLG9CQUFvQjtJQUN4QkMsTUFBTTtRQUNKQyxXQUFXQyxLQUFLQyxFQUFFO1FBQ2xCQyxRQUFRRixLQUFLQyxFQUFFO0lBQ2pCO0lBQ0FFLGNBQWNILEtBQUtDLEVBQUU7SUFDckJHLFdBQVc7UUFDVEMsUUFBUUwsS0FBS0MsRUFBRTtJQUNqQjtBQUNGO0FBRUEsTUFBTUsscUJBQXFCO0lBQ3pCQyxXQUFXUCxLQUFLQyxFQUFFO0FBQ3BCO0FBRUEsTUFBTU8sc0JBQXNCLENBQUM7QUFDN0IsTUFBTUMsbUJBQW1CLENBQUM7QUFDMUIsTUFBTUMseUJBQXlCO0lBQzdCQyxjQUFjWCxLQUFLQyxFQUFFO0FBQ3ZCO0FBQ0EsTUFBTVcsYUFBYTtJQUNqQkMsa0JBQWtCYixLQUFLQyxFQUFFO0lBQ3pCYSxPQUFPZCxLQUFLQyxFQUFFO0lBQ2RjLE9BQU9mLEtBQUtDLEVBQUU7SUFDZGUsTUFBTWhCLEtBQUtDLEVBQUU7QUFDZjtBQUNBLE1BQU1nQixxQkFBcUI7SUFDekJDLGNBQWNsQixLQUFLQyxFQUFFLEdBQUdrQixlQUFlLENBQUMsQ0FBQztJQUN6Q0Ms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